<!DOCTYPE html>
<!--TEST-->
<html>

  <head>

    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Login | NothingButTyler+</title>
    
    		<link rel="shortcut icon" href="https://avatars.githubusercontent.com/u/149272952" />
    
    <!--Button styles--> <link rel="stylesheet" href="/css/submitbutton-style.css" /><link rel="stylesheet" href="/css/main/style.css" /><link rel="stylesheet" href="/css/textbox.css" />


  </head>

  <body><font color="white">
        <a href="/contact.html" style="text-decoration: none;">    <div style="background-color:red;text-align:center;padding:10px;margin-top:7px;font-size:12px;color: black;">Some things are still a work-in-progress. If something doesn't work, let NothingButTyler know and he will update it.</div></a>

<div class="header"> 

  <a href="/" class="logo">NothingButTyler+</a>

  <div class="header-right"> 

    <a class="active" href="/">Home</a>
    
    <a href="/signup">Sign Up</a>

    <a href="/contact.html">Contact</a> 

    <a href="/about.html">About</a>
    
    <a href="/preview.html">Preview of NothingButTyler+</a>

  </div>

</div>

<!--<div style="padding-left:20px">-->

   <div>

      <center>

        <h1>Log into NothingButTyler+</h1>

        <i>Don't have an account? Sign up <a href="/signup.html">here</a>.</i>

        <br>
        <br>

        <form id="loginForm"> 
            
            <label for="accountName">Account Name:</label>
            <input type="text" id="accountName" class="nbttextbox" required>
            <br />
            
            <label for="pin">6-digit PIN:</label>
            <input type="password" id="pin" class="nbttextbox" minlength="6" maxlength="6" required>
            <br />
            
            <button type="submit" class="button-29">Log In</button>
            <p id="error-message" style="color: red;"></p>
        </form>

        <p>Or...</p>
        
                <!--<i>(Discord Sign in Button Coming Soon!)</i> Jan 16 2025, the Discord button was created-->
<a href="https://discord.com/oauth2/authorize?client_id=1323326058329804830&response_type=code&redirect_uri=https%3A%2F%2Fnothingbuttylerplus.glitch.me%2Fuser%2Fdashboard.html&scope=identify"><button class="button-29" style="display: inline-block; margin-right: 10px;"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-discord" viewBox="0 0 16 16"> <path d="M13.545 2.907a13.2 13.2 0 0 0-3.257-1.011.05.05 0 0 0-.052.025c-.141.25-.297.577-.406.833a12.2 12.2 0 0 0-3.658 0 8 8 0 0 0-.412-.833.05.05 0 0 0-.052-.025c-1.125.194-2.22.534-3.257 1.011a.04.04 0 0 0-.021.018C.356 6.024-.213 9.047.066 12.032q.003.022.021.037a13.3 13.3 0 0 0 3.995 2.02.05.05 0 0 0 .056-.019q.463-.63.818-1.329a.05.05 0 0 0-.01-.059l-.018-.011a9 9 0 0 1-1.248-.595.05.05 0 0 1-.02-.066l.015-.019q.127-.095.248-.195a.05.05 0 0 1 .051-.007c2.619 1.196 5.454 1.196 8.041 0a.05.05 0 0 1 .053.007q.121.1.248.195a.05.05 0 0 1-.004.085 8 8 0 0 1-1.249.594.05.05 0 0 0-.03.03.05.05 0 0 0 .003.041c.24.465.515.909.817 1.329a.05.05 0 0 0 .056.019 13.2 13.2 0 0 0 4.001-2.02.05.05 0 0 0 .021-.037c.334-3.451-.559-6.449-2.366-9.106a.03.03 0 0 0-.02-.019m-8.198 7.307c-.789 0-1.438-.724-1.438-1.612s.637-1.613 1.438-1.613c.807 0 1.45.73 1.438 1.613 0 .888-.637 1.612-1.438 1.612m5.316 0c-.788 0-1.438-.724-1.438-1.612s.637-1.613 1.438-1.613c.807 0 1.451.73 1.438 1.613 0 .888-.631 1.612-1.438 1.612"/> </svg> Sign in with Discord</button></a>

        <hr />
          <footer>        <div style="background-color:transparent;text-align:center;padding:10px;margin-top:7px;font-size:12px;color: white;">Copyright &copy; 2025 by NothingButTyler. All rights reserved.</div>
      </footer></center></font>
  </body>
        
        </div>
    
    </center></font>
  </body>
  
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>

<script>
    // ðŸš¨ CRITICAL FIX: NEW WORKING KEYS (nothingbuttylerplusv2)
    const firebaseConfig = {
      apiKey: "AIzaSyCxg9yjBpv0lwhG1dBpqKpUJRrQEXCsavI",
      authDomain: "nothingbuttylerplusv2.firebaseapp.com",
      projectId: "nothingbuttylerplusv2",
      storageBucket: "nothingbuttylerplusv2.firebasestorage.app",
      messagingSenderId: "478539772644",
      appId: "1:478539772644:web:aa99972afac494f9bd32f1",
      measurementId: "G-TBRJNP38KP"
    };
    
    const app = firebase.initializeApp(firebaseConfig);
    var auth = app.auth(); 
    
    // Attach login listener to the 'loginForm' ID
    document.getElementById('loginForm').addEventListener('submit', function(e) {
        e.preventDefault(); 

        const accountName = document.getElementById('accountName').value;
        const pin = document.getElementById('pin').value; // Changed ID from 'number-password' to 'pin'
        const errorMessage = document.getElementById('error-message');
        
        if (pin.length < 6) {
            errorMessage.textContent = "PIN must be 6 characters long.";
            return;
        }

        // Recreate the special email used for Authentication
        const email = `${accountName.toLowerCase().replace(/\s/g, '')}@nothingbuttylerplus.com`;

        errorMessage.textContent = ''; 

              // In the login script/block in index.html:

            auth.signInWithEmailAndPassword(email, pin)
                .then(() => {
                    console.log("Login successful. Redirecting...");
                    // Redirect the user to the correct subdirectory path
                    window.location.href = "user/dashboard.html"; // ðŸš¨ CRITICAL CHANGE ðŸš¨
                })
                // ... (catch block) ...
            });

</script>

<script src="/btn/submitbutton-script.js"></script>

</html>