<!DOCTYPE html>
<!--TEST-->
<html>

  <head>

    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Login | NothingButTyler+</title>
    
    		<link rel="shortcut icon" href="https://avatars.githubusercontent.com/u/149272952" />
    
    <!--Button styles--> <link rel="stylesheet" href="/css/submitbutton-style.css" /><link rel="stylesheet" href="/css/main/style.css" /><link rel="stylesheet" href="/css/textbox.css" />


  </head>

  <body><font color="white">
        <a href="/contact.html" style="text-decoration: none;">    <div style="background-color:red;text-align:center;padding:10px;margin-top:7px;font-size:12px;color: black;">Some things are still a work-in-progress. If something doesn't work, let NothingButTyler know and he will update it.</div></a>

<div class="header"> 

  <a href="/" class="logo">NothingButTyler+</a>

  <div class="header-right"> 

    <a class="active" href="/">Home</a>
    
    <a href="/signup">Sign Up</a>

    <a href="/contact.html">Contact</a> 

    <a href="/about.html">About</a>
    
    <a href="/preview.html">Preview of NothingButTyler+</a>

  </div>

</div>

<!--<div style="padding-left:20px">-->

   <div>

      <center>

        <h1>Log into NothingButTyler+</h1>

        <i>Don't have an account? Sign up <a href="/signup.html">here</a>.</i>

        <br>
        <br>

        <form id="loginForm"> 
            
            <label for="accountName">Account Name:</label>
            <input type="text" id="accountName" class="nbttextbox" required>
            <br />
            
            <label for="pin">6-digit PIN:</label>
            <input type="password" id="pin" class="nbttextbox" minlength="6" maxlength="6" required>
            <br />
            
            <button type="submit" class="button-29">Log In</button>
            <p id="error-message" style="color: red;"></p>
        </form>

        <p>Or...</p>
        
                <!--<i>(Discord Sign in Button Coming Soon!)</i> Jan 16 2025, the Discord button was created-->
<a href="https://discord.com/oauth2/authorize?client_id=1323326058329804830&response_type=code&redirect_uri=https%3A%2F%2Fnothingbuttylerplus.glitch.me%2Fuser%2Fdashboard.html&scope=identify"><button class="button-29" role="button" style="display: inline-block; margin-right: 10px;"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-discord" viewBox="0 0 16 16"> <path d="M13.545 2.907a13.2 13.2 0 0 0-3.257-1.011.05.05 0 0 0-.052.025c-.141.25-.297.577-.406.833a12.2 12.2 0 0 0-3.658 0 8 8 0 0 0-.412-.833.05.05 0 0 0-.052-.025c-1.125.194-2.22.534-3.257 1.011a.04.04 0 0 0-.021.018C.356 6.024-.213 9.047.066 12.032q.003.022.021.037a13.3 13.3 0 0 0 3.995 2.02.05.05 0 0 0 .056-.019q.463-.63.818-1.329a.05.05 0 0 0-.01-.059l-.018-.011a9 9 0 0 1-1.248-.595.05.05 0 0 1-.02-.066l.015-.019q.127-.095.248-.195a.05.05 0 0 1 .051-.007c2.619 1.196 5.454 1.196 8.041 0a.05.05 0 0 1 .053.007q.121.1.248.195a.05.05 0 0 1-.004.085 8 8 0 0 1-1.249.594.05.05 0 0 0-.03.03.05.05 0 0 0 .003.041c.24.465.515.909.817 1.329a.05.05 0 0 0 .056.019 13.2 13.2 0 0 0 4.001-2.02.05.05 0 0 0 .021-.037c.334-3.451-.559-6.449-2.366-9.106a.03.03 0 0 0-.02-.019m-8.198 7.307c-.789 0-1.438-.724-1.438-1.612s.637-1.613 1.438-1.613c.807 0 1.45.73 1.438 1.613 0 .888-.637 1.612-1.438 1.612m5.316 0c-.788 0-1.438-.724-1.438-1.612s.637-1.613 1.438-1.613c.807 0 1.451.73 1.438 1.613 0 .888-.631 1.612-1.438 1.612"/> </svg> Sign in with Discord</button></a>

        <hr />
          <footer>        <div style="background-color:transparent;text-align:center;padding:10px;margin-top:7px;font-size:12px;color: white;">Copyright &copy; 2025 by NothingButTyler. All rights reserved.</div>
      </footer></center></font>
  </body>
        
        </div>
    
    </center></font>
  </body>
  
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>

<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>

<script>
    // Initialize Firebase
    const firebaseConfig = {
      apiKey: "AIzaSyCxg9yjBpv0lwhG1dBpqKpUJRrQEXCsavI",
      authDomain: "nothingbuttylerplusv2.firebaseapp.com",
      projectId: "nothingbuttylerplusv2",
      storageBucket: "nothingbuttylerplusv2.firebasestorage.app",
      messagingSenderId: "478539772644",
      appId: "1:478539772644:web:aa99972afac494f9bd32f1",
      measurementId: "G-TBRJNP38KP"
    };
    
    const app = firebase.initializeApp(firebaseConfig);
    var auth = app.auth(); 
    var db = app.firestore(); // We need Firestore here for the lookup!
    
    // Attach login listener to the 'loginForm' ID
    document.getElementById('loginForm').addEventListener('submit', function(e) {
        e.preventDefault(); 

        const accountName = document.getElementById('accountName').value.trim(); // The user enters the current display name (e.g., 'Test-hi')
        const pin = document.getElementById('pin').value;
        const errorMessage = document.getElementById('error-message');
        
        if (pin.length < 6) {
            errorMessage.textContent = "PIN must be 6 characters long.";
            return;
        }

        errorMessage.textContent = 'Verifying account name...'; 

        // 1. QUERY FIRESTORE: Find the user document by the current accountName/username
        db.collection("users").where("accountName", "==", accountName).get()
        .then((querySnapshot) => {
            
            if (querySnapshot.empty) {
                // No user found with that accountName
                errorMessage.textContent = "Invalid Account Name or PIN.";
                return;
            }

            // 2. USER FOUND: The user exists in Firestore with the entered accountName.
            // Since we cannot change the Firebase Auth email, we MUST use the fixed, original email.
            
            // --- CRITICAL FIX: Use the KNOWN, STATIC EMAIL for the login attempt. ---
            // If the original username for your test account was 'Test', 
            // the email prefix is 'test'. If it was 'tyler', it's 'tyler'.
            // YOU MUST ENSURE THIS PREFIX IS CORRECT FOR YOUR TEST ACCOUNT.
            const originalEmailPrefix = "test"; // <-- REPLACE 'test' if your original login was different
            const correctLoginEmail = `${originalEmailPrefix}@nothingbuttylerplus.com`;
            // ---------------------------------------------------------------------

            errorMessage.textContent = 'Attempting sign-in...'; 

            // 3. SIGN IN: Use the CORRECT, STATIC email and the PIN to authenticate
            auth.signInWithEmailAndPassword(correctLoginEmail, pin)
                .then(() => {
                    console.log("Login successful. Redirecting...");
                    errorMessage.textContent = "Login successful!";
                    // Redirect the user to the dashboard
                    window.location.href = "user/dashboard.html"; 
                })
                .catch((error) => {
                    // This error is usually a wrong PIN, as the email was found in Firestore
                    errorMessage.textContent = "Invalid Account Name or PIN.";
                    console.error("Firebase Sign-In Error:", error);
                });
        })
        .catch((error) => {
            console.error("Firestore Lookup Error:", error);
            errorMessage.textContent = "An error occurred during verification.";
        });
    });

</script>


<script src="/btn/submitbutton-script.js"></script>

</html>

    
    
    
    
    
    
    
    
    
    <style>
    
/*
--------------------------------------------------------------------------------------------------
THESE STYLES ARE COPYRIGHTED (c) 2025 BY NOTHINGBUTTYLER. DO NOT USE TO PUT THIS ON YOUR WEBSITE.
--------------------------------------------------------------------------------------------------
*/

/* START STYLE.CSS */



/* MAIN STYLES FOR HOMEPAGE */



body { 
  margin: 0; 
  font-family: Arial, Helvetica, sans-serif;
  background: rgb(2,0,36);
  background: linear-gradient(0deg, rgba(2,0,36,1) 0%, rgba(9,9,121,1) 50%, rgba(0,255,255,1) 100%);


}

.header { 

  overflow: hidden; 

 /* background-color: #f1f1f1; */

  padding: 20px 10px;

}

.header a { 

  float: left; 

  color: white; 

  text-align: center; 

  padding: 12px; 

  text-decoration: none; 

  font-size: 18px; 

  line-height: 25px; 

  border-radius: 4px;

}

.header a.logo {

  font-size: 25px; 

  font-weight: bold;

}

.header a:hover { 

  background-color: #dddddd; 

  color: white;

}

.header a.active { 

  background-color: dodgerblue; 

  color: white;

}

.header-right { 

  float: right;

}

@media screen and (max-width: 500px) { 

  .header a {

    float: none;

    display: block; 

    text-align: left;

  } 

  .header-right { 

    float: none; 

  }}
a {
  text-decoration: ;
  color: white;
/* END OF MAIN STYLING FOR HOMEPAGE */
  
  
/* LOGIN AREA  - INPUT PASSWORD STYLING */
  
  
 /* This is the number password styling for the code on the login page. (index.html)*/

          input[type="password"] { 

            width: 100px;

            padding: 10px;

            font-size: 16px; 

            border: 1px solid #ccc;

            border-radius: 4px;

          }

/* END OF LOGIN AREA - INPUT PASSWORD STYLING */
  
  
  
  

  
  /* TEXT INPUT STYLING */
  
           input {
                    box-shadow: inset #abacaf 0 0 0 2px;
                    border: 0;
                    background: rgba(0, 0, 0, 0);
                    appearance: none;
                    width: 100%;
                    position: relative;
                    border-radius: 3px;
                    padding: 9px 12px;
                    line-height: 1.4;
                    color: rgb(0, 0, 0);
                    font-size: 16px;
                    font-weight: 400;
                    height: 40px;
                    transition: all .2s ease;
                    :hover{
                        box-shadow: 0 0 0 0 #fff inset, #1de9b6 0 0 0 2px;
                    }
                    :focus{
                        background: #fff;
                        outline: 0;
                        box-shadow: 0 0 0 0 #fff inset, #1de9b6 0 0 0 3px;
                    }
                
  
  /* END OF TEXT INPUT STYLING */
  
  
  
  /* DISCARD CHANGES TEST */
#discardChangesButton {
    /* Assuming you want it to look like a standard, un-highlighted button */
    background-color: transparent !important; 
    color: white !important; 
    border: 1px solid white !important;
}

/* If you are using a standard blue/colored button-29 */
/* You may just need to override whatever is blocking it */
#discardChangesButton {
    /* For testing: Just make it look like the Save button */
    background-color: #5865f2 !important; 
    color: white !important;
}
             
             
             
/* BUTTON  29 */
             
  /*<!-- HTML !-->
<button class="button-29" role="button">Button 29</button>
*/
             
.button-29 {
  align-items: center;
  appearance: none;
  background-image: radial-gradient(100% 100% at 100% 0, #5adaff 0, #5468ff 100%);
  border: 0;
  border-radius: 6px;
  box-shadow: rgba(45, 35, 66, .4) 0 2px 4px,rgba(45, 35, 66, .3) 0 7px 13px -3px,rgba(58, 65, 111, .5) 0 -3px 0 inset;
  box-sizing: border-box;
  color: #fff;
  cursor: pointer;
  display: inline-flex;
  font-family: "JetBrains Mono",monospace;
  height: 48px;
  justify-content: center;
  line-height: 1;
  list-style: none;
  overflow: hidden;
  padding-left: 16px;
  padding-right: 16px;
  position: relative;
  text-align: left;
  text-decoration: none;
  transition: box-shadow .15s,transform .15s;
  user-select: none;
  -webkit-user-select: none;
  touch-action: manipulation;
  white-space: nowrap;
  will-change: box-shadow,transform;
  font-size: 18px;
}

.button-29:focus {
  box-shadow: #3c4fe0 0 0 0 1.5px inset, rgba(45, 35, 66, .4) 0 2px 4px, rgba(45, 35, 66, .3) 0 7px 13px -3px, #3c4fe0 0 -3px 0 inset;
}

.button-29:hover {
  box-shadow: rgba(45, 35, 66, .4) 0 4px 8px, rgba(45, 35, 66, .3) 0 7px 13px -3px, #3c4fe0 0 -3px 0 inset;
  transform: translateY(-2px);
}

.button-29:active {
  box-shadow: #3c4fe0 0 3px 7px inset;
  transform: translateY(2px);
}
             
             
             
/* TEXT INPUT */
              .nbttextbox  {
                border: 3px solid #000;
                border-radius: 5px;
                height: 50px;
                line-height: normal;
                color: #282828;
                display: block;
                width: 100%;
                box-sizing: border-box;
                user-select: auto;
                font-size: 16px;
                padding: 0 6px;
                padding-left: 12px;
                :focus{
                    border: 3px solid #5551ff;
                }
             
             
             
             
                             
  /* END OF STYLE.CSS */
             
             </style>